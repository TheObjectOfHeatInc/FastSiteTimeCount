<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #f0f0f0;
            font-family: Arial, sans-serif;
        }
        
        .controls {
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
        }
        
        button:hover {
            background: #5a6fd8;
        }
        
        canvas {
            border: 2px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .download-link {
            display: block;
            margin-top: 10px;
            color: #667eea;
            text-decoration: none;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <div class="controls">
        <h2>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞ –¥–ª—è Telegram</h2>
        <p>–≠—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –¥–ª—è –ø—Ä–µ–≤—å—é –≤ Telegram</p>
        <button onclick="generateImage()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</button>
        <button onclick="downloadImage()">–°–∫–∞—á–∞—Ç—å PNG</button>
        <button onclick="copyDataURL()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å Data URL</button>
        <a id="downloadLink" class="download-link" style="display: none;"></a>
    </div>
    
    <canvas id="timerCanvas" width="1200" height="630"></canvas>
    
    <script>
        const canvas = document.getElementById('timerCanvas');
        const ctx = canvas.getContext('2d');
        
        function generateImage() {
            const now = new Date();
            const timeString = formatTime(now);
            const dateString = formatDate(now);
            
            // –°–æ–∑–¥–∞–µ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω
            const gradient = ctx.createLinearGradient(0, 0, 1200, 630);
            gradient.addColorStop(0, '#667eea');
            gradient.addColorStop(1, '#764ba2');
            
            // –ó–∞–ª–∏–≤–∞–µ–º —Ñ–æ–Ω
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 1200, 630);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
            for (let i = 0; i < 100; i++) {
                const x = Math.random() * 1200;
                const y = Math.random() * 630;
                const radius = Math.random() * 4 + 1;
                ctx.beginPath();
                ctx.arc(x, y, radius, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–Ω–∏
            ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';
            ctx.shadowBlur = 8;
            ctx.shadowOffsetX = 4;
            ctx.shadowOffsetY = 4;
            
            // –†–∏—Å—É–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            ctx.fillStyle = 'white';
            ctx.font = 'bold 90px Arial, sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('‚è∞ –¢–∞–π–º–µ—Ä', 600, 180);
            
            // –†–∏—Å—É–µ–º –≤—Ä–µ–º—è
            ctx.font = 'bold 140px "Courier New", monospace';
            ctx.fillText(timeString, 600, 320);
            
            // –†–∏—Å—É–µ–º –¥–∞—Ç—É
            ctx.font = 'bold 50px Arial, sans-serif';
            ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
            ctx.fillText(dateString, 600, 420);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥–ø–∏—Å—å
            ctx.font = 'bold 30px Arial, sans-serif';
            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
            ctx.fillText('–û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏', 600, 500);
            
            // –£–±–∏—Ä–∞–µ–º —Ç–µ–Ω–∏
            ctx.shadowColor = 'transparent';
            ctx.shadowBlur = 0;
            ctx.shadowOffsetX = 0;
            ctx.shadowOffsetY = 0;
            
            // –°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
            const dataURL = canvas.toDataURL('image/png', 1.0);
            const downloadLink = document.getElementById('downloadLink');
            downloadLink.href = dataURL;
            downloadLink.download = `timer-${timeString.replace(/:/g, '-')}-${dateString.replace(/\./g, '-')}.png`;
            downloadLink.textContent = `üíæ –°–∫–∞—á–∞—Ç—å: timer-${timeString.replace(/:/g, '-')}.png`;
            downloadLink.style.display = 'block';
            
            console.log('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ!');
        }
        
        function formatTime(date) {
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            const seconds = String(date.getSeconds()).padStart(2, '0');
            return `${hours}:${minutes}:${seconds}`;
        }
        
        function formatDate(date) {
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const year = date.getFullYear();
            return `${day}.${month}.${year}`;
        }
        
        function downloadImage() {
            const link = document.getElementById('downloadLink');
            if (link.href) {
                link.click();
            } else {
                alert('–°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ!');
            }
        }
        
        function copyDataURL() {
            const dataURL = canvas.toDataURL('image/png', 1.0);
            navigator.clipboard.writeText(dataURL).then(() => {
                alert('Data URL —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!\n\n–ú–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –∫–∞–∫ src –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.');
            }).catch(() => {
                alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª.');
            });
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        generateImage();
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
        setInterval(generateImage, 10000);
    </script>
</body>
</html>
